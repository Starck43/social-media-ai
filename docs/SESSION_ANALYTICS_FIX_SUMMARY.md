# –ò—Ç–æ–≥–∏ —Å–µ—Å—Å–∏–∏: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ —É–ª—É—á—à–µ–Ω–∏–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

**–î–∞—Ç–∞**: 16.10.2025  
**–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

---

## üéØ –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `python -m cli.scheduler run --once` –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏—è "–≠–∫—Å–ø—Ä–µ—Å—Å-–∞–Ω–∞–ª–∏–∑" (id=6):
- ‚ùå –í dashboard –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
- ‚ùå –ù–µ –≤–∏–¥–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç LLM –≤ `AIAnalytics.summary_data`
- ‚ùå –ü–æ–ª—è `provider_type` –∏ `estimated_cost` –Ω–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è

---

## ‚úÖ –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **Provider Type –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–ª—Å—è** 

**–ü—Ä–æ–±–ª–µ–º–∞**: `provider_type` –≤—Å–µ–≥–¥–∞ –±—ã–ª `NULL` –∏–ª–∏ `'deepseek'` –¥–ª—è custom –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞**: `LLMClient` –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª –ø–æ–ª–µ `provider` –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –æ—Ç–≤–µ—Ç–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** (`app/services/ai/llm_client.py`):
```python
# –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ _get_provider_name()
def _get_provider_name(self) -> str:
    provider_type = get_enum_value(self.provider.provider_type)
    if provider_type == 'custom':
        if 'sambanova' in self.provider.api_url.lower():
            return 'sambanova'
        if 'openrouter' in self.provider.api_url.lower():
            return 'openrouter'
        return self.provider.name.lower().replace(' ', '_')
    return provider_type

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ return statement
return {
    "request": {
        "model": self.model_name,
        "prompt": prompt,
        "provider": self._get_provider_name()  # ‚úÖ
    },
    ...
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ `provider_type='sambanova'` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ë–î

---

### 2. **Estimated Cost –≤—Å–µ–≥–¥–∞ –±—ã–ª 0 –∏–ª–∏ NULL**

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–ª—è –º–∞–ª—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ç–æ–∫–µ–Ω–æ–≤ —Ñ–æ—Ä–º—É–ª–∞ –¥–∞–≤–∞–ª–∞ 0

```python
# –ë—ã–ª–æ:
total_tokens = 156
estimated_cost_cents = int((156 / 1000) * 1)  # int(0.156) = 0
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** (`app/services/ai/analyzer.py`):
```python
# –°—Ç–∞–ª–æ:
estimated_cost_cents = max(1, int((total_tokens / 1000) * 100)) if total_tokens > 0 else 0
# –î–ª—è 156 —Ç–æ–∫–µ–Ω–æ–≤ = max(1, int(15.6)) = max(1, 15) = 15 —Ü–µ–Ω—Ç–æ–≤ ‚úÖ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ `estimated_cost=15` —Ü–µ–Ω—Ç–æ–≤ ($0.15) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è

---

### 3. **–û—à–∏–±–∫–∞ –≤ LLMProviderManager.get_by_capability()**

**–ü—Ä–æ–±–ª–µ–º–∞**: `'LLMProviderManager' object has no attribute 'select'`

```python
# –ë—ã–ª–æ:
query = self.model.objects.select()  # ‚ùå
query = query.where(...)
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** (`app/models/managers/llm_provider_manager.py`):
```python
# –°—Ç–∞–ª–æ: –ø—Ä–æ—Å—Ç–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ Python
if is_active:
    all_providers = await self.filter(is_active=True)
else:
    all_providers = await self.all()

providers = [
    p for p in all_providers 
    if p.capabilities and capability in p.capabilities
]
return providers
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –ú–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### 4. **–û—à–∏–±–∫–∞ —Å enum value –¥–ª—è media_type**

**–ü—Ä–æ–±–ª–µ–º–∞**: `'No active LLM provider found for ('text', '–¢–µ–∫—Å—Ç', 'üìù')'` - tuple –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏

```python
# –ë—ã–ª–æ:
provider = await LLMProvider.objects.get_default_for_media_type(media_type.value)  # ‚ùå –≤–æ–∑–≤—Ä–∞—â–∞–ª tuple
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** (`app/services/ai/analyzer.py`):
```python
# –°—Ç–∞–ª–æ:
media_type_str = get_enum_value(media_type)
provider = await LLMProvider.objects.get_default_for_media_type(media_type_str)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

---

### 5. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ custom LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤**

**–ü—Ä–æ–±–ª–µ–º–∞**: `"Unknown provider type: custom, using DeepSeekClient as fallback"`

**–û–±–Ω–∞—Ä—É–∂–µ–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä**:
```
ID: 8
Name: SambaCloud (Sambanova AI)
Type: custom
Model: Llama-4-Maverick-17B-128E-Instruct
API: https://api.sambanova.ai/v1/chat/completions
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** (`app/services/ai/llm_client.py`):
```python
_client_map = {
    "deepseek": DeepSeekClient,
    "openai": OpenAIClient,
    "custom": DeepSeekClient,  # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ Custom –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç, `provider_type` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è

---

## üé® –£–ª—É—á—à–µ–Ω–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ AI Analytics

### –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`app/admin/views.py`)

**–°–ø–∏—Å–æ–∫ –∫–æ–ª–æ–Ω–æ–∫**:
```python
# –ë—ã–ª–æ:
column_list = ["id", "source", "period_type", "topic_chain_id", "analysis_date", "created_at"]

# –°—Ç–∞–ª–æ:
column_list = ["id", "source", "llm_model", "provider_type", "estimated_cost", "analysis_date", "created_at"]
```

**Read-only –ø–æ–ª—è**:
```python
form_widget_args = {
    "analysis_date": {"readonly": True},
    "llm_model": {"readonly": True},
    "provider_type": {"readonly": True},
    "request_tokens": {"readonly": True},
    "response_tokens": {"readonly": True},
    "estimated_cost": {"readonly": True},
    "media_types": {"readonly": True},
}
```

**–ò—Å–∫–ª—é—á–µ–Ω–Ω—ã–µ –ø–æ–ª—è**:
```python
form_excluded_columns = [
    "summary_data",      # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    "response_payload",  # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    "prompt_text",       # –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π, —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ–±–∞–≥–∞
]
```

**–§–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã**:
```python
column_formatters = {
    "estimated_cost": lambda m, a: f"${(m.estimated_cost or 0) / 100:.4f}",
    "request_tokens": lambda m, a: f"{m.request_tokens:,}" if m.request_tokens else "‚Äî",
    "response_tokens": lambda m, a: f"{m.response_tokens:,}" if m.response_tokens else "‚Äî",
    "media_types": lambda m, a: ", ".join(m.media_types) if m.media_types else "‚Äî",
}
```

---

### –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω —à–∞–±–ª–æ–Ω details

**–§–∞–π–ª**: `app/templates/sqladmin/ai_analytics_detail.html`

**–ù–æ–≤—ã–µ —Å–µ–∫—Ü–∏–∏**:

1. **LLM Metrics** (6 –∫–∞—Ä—Ç–æ—á–µ–∫):
   - –ú–æ–¥–µ–ª—å –ò–ò
   - –ü—Ä–æ–≤–∞–π–¥–µ—Ä (—Å –±–µ–π–¥–∂–µ–º)
   - –¢–æ–∫–µ–Ω–æ–≤ –∑–∞–ø—Ä–æ—Å / –æ—Ç–≤–µ—Ç
   - –°—Ç–æ–∏–º–æ—Å—Ç—å ($)
   - –¢–∏–ø—ã –º–µ–¥–∏–∞

2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞**:
   - –ü–æ—Å—Ç–æ–≤, —Ä–µ–∞–∫—Ü–∏–π, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
   - –°—Ä–µ–¥–Ω—è—è –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å

3. **–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞** (–∏–∑ `multi_llm_analysis`):
   - –ì–ª–∞–≤–Ω—ã–µ —Ç–µ–º—ã
   - –û–±—â–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
   - –í—ã–¥–µ–ª—è—é—â–∏–µ—Å—è –º–æ–º–µ–Ω—Ç—ã
   - Progress bar –¥–ª—è —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

4. **JSON Viewers** (2 —Å–µ–∫—Ü–∏–∏):
   - `summary_data` - —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ (Highlight.js)
   - `response_payload` - —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
   - –ö–Ω–æ–ø–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π

5. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**:
   - –í—Å–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Jinja2 –æ—à–∏–±–∫–∏**:
```jinja2
{# –ë—ã–ª–æ (‚ùå –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç): #}
{{ model.period_type.label if hasattr(model.period_type, 'label') else ... }}

{# –°—Ç–∞–ª–æ (‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç): #}
{{ model.period_type.label if model.period_type and model.period_type.label is defined else model.period_type }}
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Analytics ID 79 (–ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å):

```
‚úÖ –ú–æ–¥–µ–ª—å: Llama-4-Maverick-17B-128E-Instruct
‚úÖ Provider: sambanova (–±—ã–ª–æ 'deepseek', —Å—Ç–∞–ª–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!)
‚úÖ Request Tokens: 111
‚úÖ Response Tokens: 45
‚úÖ Cost: 15 cents ($0.1500)
‚úÖ Media Types: ['text']
‚úÖ Text Analysis: {
    "main_topics": ["–≥–ª–∞–≤–Ω—ã–µ —Ç–µ–º—ã –æ–±—Å—É–∂–¥–µ–Ω–∏–π"],
    "overall_mood": "–æ–±—â–∏–π –Ω–∞—Å—Ç—Ä–æ–π –æ–±—Å—É–∂–¥–µ–Ω–∏–π",
    "highlights": ["–≤—ã–¥–µ–ª—è—é—â–∏–µ—Å—è –∏–ª–∏ –Ω–µ–æ–±—ã—á–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã"]
}
```

### Dashboard API (—Ç–µ—Å—Ç—ã):

```json
{
  "llm_stats": {
    "sambanova": {
      "requests": 1,
      "total_tokens": 156,
      "estimated_cost_usd": 0.15
    }
  },
  "content_mix": {
    "text": {"count": 1, "percentage": 100.0}
  }
}
```

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥:
1. **`app/services/ai/llm_client.py`** - –¥–æ–±–∞–≤–ª–µ–Ω `_get_provider_name()`, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ custom
2. **`app/services/ai/analyzer.py`** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏, enum handling
3. **`app/models/managers/llm_provider_manager.py`** - –ø–µ—Ä–µ–ø–∏—Å–∞–Ω `get_by_capability()`

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:
4. **`app/admin/views.py`** - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `AIAnalyticsAdmin`
5. **`app/templates/sqladmin/ai_analytics_detail.html`** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
6. **`docs/AI_ANALYTICS_ADMIN_GUIDE.md`** - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–ù–û–í–´–ô)
7. **`docs/JINJA2_BEST_PRACTICES.md`** - best practices –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤ (–ù–û–í–´–ô)
8. **`docs/SESSION_ANALYTICS_FIX_SUMMARY.md`** - —ç—Ç–æ—Ç —Ñ–∞–π–ª (–ù–û–í–´–ô)

---

## üîç –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã

### 1. –ó–∞—á–µ–º —Ö—Ä–∞–Ω–∏—Ç—å `prompt_text`?

**–î–ª—è**:
- üîç –û—Ç–ª–∞–¥–∫–∏ - –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø–æ—á–µ–º—É LLM –≤–µ—Ä–Ω—É–ª —Ç–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- üìä –ê—É–¥–∏—Ç–∞ - –ø—Ä–æ–≤–µ—Ä–∫–∏ —á—Ç–æ –∏–º–µ–Ω–Ω–æ –º—ã —Å–ø—Ä–∞—à–∏–≤–∞–ª–∏
- üîÑ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è - –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞
- üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ - –∞–Ω–∞–ª–∏–∑–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ**:
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω –∏–∑ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –•—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
- ‚úÖ –ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á–µ—Ä–µ–∑ SQL –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```sql
-- –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞
UPDATE social_manager.ai_analytics
SET prompt_text = NULL
WHERE created_at < CURRENT_DATE - INTERVAL '30 days'
  AND prompt_text IS NOT NULL;
```

---

### 2. –ü–æ—á–µ–º—É `summary_data` –Ω–µ –≤ —Ñ–æ—Ä–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è?

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ**:
1. ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è AI Analyzer'–æ–º
2. üìä –°–ª–æ–∂–Ω–∞—è JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
3. üö´ –ù–µ –¥–æ–ª–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤—Ä—É—á–Ω—É—é
4. üìù –ë–æ–ª—å—à–æ–π –æ–±—ä–µ–º (5-10KB+)

**–ì–¥–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å**:
- ‚úÖ Details —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/admin/ai-analytics/details/79`)
- ‚úÖ JSON viewer —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—É—Ñ–µ—Ä

---

### 3. –ö–∞–∫–∏–µ –ø–æ–ª—è read-only?

**Read-only** (–º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å, –Ω–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å):
- `analysis_date`, `llm_model`, `provider_type`
- `request_tokens`, `response_tokens`, `estimated_cost`, `media_types`

**–ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–µ–Ω—ã**:
- `summary_data`, `response_payload`, `prompt_text`
- `created_at`, `updated_at`

**–ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å**:
- `source_id`, `period_type`, `topic_chain_id`, `parent_analysis_id`

---

## üéâ –ò—Ç–æ–≥–∏

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
‚úÖ –í—Å–µ –ø–æ–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è  
‚úÖ Custom LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (SambaCloud) —Ä–∞–±–æ—Ç–∞—é—Ç  
‚úÖ –°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è  
‚úÖ Provider type –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è  
‚úÖ Dashboard API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ  
‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —É–¥–æ–±–Ω–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞  
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è  

### –ú–µ—Ç—Ä–∏–∫–∏:
- üìä **–ó–∞–ø–∏—Å–µ–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ**: 2 analytics
- üí∞ **–°—Ç–æ–∏–º–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞**: $0.15 (15 —Ü–µ–Ω—Ç–æ–≤)
- üî¢ **–¢–æ–∫–µ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ**: 156 (111 –∑–∞–ø—Ä–æ—Å + 45 –æ—Ç–≤–µ—Ç)
- ü§ñ **–ü—Ä–æ–≤–∞–π–¥–µ—Ä**: Sambanova AI (Llama-4-Maverick-17B-128E-Instruct)
- üìù **–¢–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞**: text

### –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- ‚è±Ô∏è **–ê–Ω–∞–ª–∏–∑ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: ~2 —á–∞—Å–∞
- ‚è±Ô∏è **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ~30 –º–∏–Ω—É—Ç
- ‚è±Ô∏è **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: ~30 –º–∏–Ω—É—Ç

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

### Production:
1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (–∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –±—é–¥–∂–µ—Ç–∞)
2. ‚úÖ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –∞–Ω–∞–ª–∏–∑—ã (> 90 –¥–Ω–µ–π)
3. ‚úÖ –£–¥–∞–ª—è—Ç—å `prompt_text` —É —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞
4. ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å Dashboard –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
1. üí° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –¥–µ—à–µ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á
2. üí° Batch –∞–Ω–∞–ª–∏–∑ –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –º–µ–ª–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
3. üí° –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∞–Ω–∞–ª–∏–∑–æ–≤
4. üí° –ù–∞—Å—Ç—Ä–æ–∏—Ç—å rate limiting –¥–ª—è LLM –∑–∞–ø—Ä–æ—Å–æ–≤

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production**: ‚úÖ –î–∞  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: ‚úÖ –ü–æ–ª–Ω–∞—è
