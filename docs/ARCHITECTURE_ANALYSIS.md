# Architecture Analysis: Where LLMProvider Should Be Connected

## ‚ùì –í–æ–ø—Ä–æ—Å
> –ú—ã LLM –º–æ–¥–µ–ª—å –ø–æ–¥–∫–ª—é—á–∏–ª–∏ –∏ –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –±–æ—Ç–∞ –∏ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É? –ö–∞–∫–æ–π —Å–º—ã—Å–ª –≤ —ç—Ç–æ–º?

## ‚úÖ –û—Ç–≤–µ—Ç: –ù–ï–¢! LLMProvider –ø–æ–¥–∫–ª—é—á–µ–Ω –¢–û–õ–¨–ö–û –≤ BotScenario

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ü–†–ê–í–ò–õ–¨–ù–ê–Ø):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         DATA FLOW                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. Source (VK –≥—Ä—É–ø–ø–∞, Telegram –∫–∞–Ω–∞–ª)
   ‚îú‚îÄ id: 1
   ‚îú‚îÄ name: "IT News VK"
   ‚îî‚îÄ bot_scenario_id: 5 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                 ‚îÇ
                                 ‚ñº
2. BotScenario (–ß–¢–û –∏ –ö–ê–ö –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å)
   ‚îú‚îÄ id: 5                          ‚Üê –ó–î–ï–°–¨ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –í–°–Å!
   ‚îú‚îÄ name: "Tech Content Analysis"
   ‚îú‚îÄ analysis_types: ["sentiment", "topics"]
   ‚îú‚îÄ content_types: ["posts", "videos"]
   ‚îú‚îÄ ai_prompt: "Analyze tech content..."
   ‚îú‚îÄ text_llm_provider_id: 1 ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚Üê LLM –¥–ª—è —Ç–µ–∫—Å—Ç–∞
   ‚îú‚îÄ image_llm_provider_id: 2 ‚îÄ‚îÄ‚îÄ‚î§  ‚Üê LLM –¥–ª—è —Ñ–æ—Ç–æ
   ‚îî‚îÄ video_llm_provider_id: 2 ‚îÄ‚îÄ‚îÄ‚î§  ‚Üê LLM –¥–ª—è –≤–∏–¥–µ–æ
                                   ‚îÇ
                                   ‚ñº
                          LLMProvider (–ö–ê–ö–û–ô AI –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
                          ‚îú‚îÄ id: 1 "DeepSeek" (text)
                          ‚îî‚îÄ id: 2 "GPT-4 Vision" (image, video)

3. ContentCollector.collect_from_source(source)
   ‚îî‚îÄ –°–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç: posts, comments, videos, images

4. AIAnalyzer.analyze_content(content, source)
   ‚îú‚îÄ –ó–∞–≥—Ä—É–∂–∞–µ—Ç bot_scenario –∏–∑ source.bot_scenario_id
   ‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç LLM providers –∏–∑ bot_scenario
   ‚îú‚îÄ –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ —Ç–∏–ø–∞–º
   ‚îú‚îÄ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π —Ç–∏–ø —Å–≤–æ–∏–º LLM
   ‚îî‚îÄ –°–æ–∑–¥–∞–µ—Ç AIAnalytics —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

5. AIAnalytics (–†–ï–ó–£–õ–¨–¢–ê–¢ –∞–Ω–∞–ª–∏–∑–∞ - –∞—Ä—Ö–∏–≤–Ω–∞—è –∑–∞–ø–∏—Å—å)
   ‚îú‚îÄ id: 100
   ‚îú‚îÄ source_id: 1
   ‚îú‚îÄ summary_data: {...}              ‚Üê –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
   ‚îú‚îÄ llm_model: "deepseek-chat"       ‚Üê –î–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ (—Å—Ç—Ä–æ–∫–∞)
   ‚îî‚îÄ NO LLMProvider FK!               ‚Üê –ù–ï–¢ —Å–≤—è–∑–∏! –≠—Ç–æ –ü–†–ê–í–ò–õ–¨–ù–û!
```

## üéØ –õ–æ–≥–∏–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### BotScenario - "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ö–ê–ö –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"

**–†–æ–ª—å:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç **—Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∞–Ω–∞–ª–∏–∑–∞** –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- ‚úÖ `analysis_types` - –∫–∞–∫–∏–µ —Ç–∏–ø—ã –∞–Ω–∞–ª–∏–∑–∞ –¥–µ–ª–∞—Ç—å
- ‚úÖ `content_types` - –∫–∞–∫–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å–æ–±–∏—Ä–∞—Ç—å
- ‚úÖ `ai_prompt` - –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- ‚úÖ `text_llm_provider_id` - **–ö–ê–ö–û–ô LLM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ç–µ–∫—Å—Ç–∞**
- ‚úÖ `image_llm_provider_id` - **–ö–ê–ö–û–ô LLM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ñ–æ—Ç–æ**
- ‚úÖ `video_llm_provider_id` - **–ö–ê–ö–û–ô LLM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤–∏–¥–µ–æ**

**–ü–æ—á–µ–º—É –∑–¥–µ—Å—å?**
- üîÑ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π** - –æ–¥–∏–Ω —Å—Ü–µ–Ω–∞—Ä–∏–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –º–Ω–æ–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- üé® **–ì–∏–±–∫–∏–π** - –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
- üìù **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–π** - –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–Ω–∞–ª–∏–∑–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

**–ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:**
```python
# –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑ (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç)
{
  "name": "Quick Sentiment Check",
  "analysis_types": ["sentiment"],
  "text_llm_provider": "DeepSeek Default",  # –ë—ã—Å—Ç—Ä—ã–π –∏ –¥–µ—à–µ–≤—ã–π
  "image_llm_provider": null,                # –ù–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º
  "video_llm_provider": null                 # –ù–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º
}

# –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞ –∞–Ω–∞–ª–∏–∑
{
  "name": "Full Media Analysis",
  "analysis_types": ["sentiment", "topics", "engagement"],
  "text_llm_provider": "DeepSeek Default",  # –î–ª—è —Ç–µ–∫—Å—Ç–∞
  "image_llm_provider": "GPT-4 Vision",     # –î–ª—è —Ñ–æ—Ç–æ/—Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
  "video_llm_provider": "GPT-4 Vision"      # –î–ª—è –≤–∏–¥–µ–æ
}

# –°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
{
  "name": "Visual Content Only",
  "analysis_types": ["visual_themes"],
  "text_llm_provider": null,                # –ù–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç
  "image_llm_provider": "GPT-4 Vision",     # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–∫—É—Å
  "video_llm_provider": "GPT-4 Vision"
}
```

### AIAnalytics - "–ê—Ä—Ö–∏–≤–Ω–∞—è –∑–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞"

**–†–æ–ª—å:** –•—Ä–∞–Ω–∏—Ç **—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- ‚úÖ `summary_data` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ (JSON)
- ‚úÖ `llm_model` - –∫–∞–∫–∞—è –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å (—Å—Ç—Ä–æ–∫–∞ –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏)
- ‚úÖ `prompt_text` - –∫–∞–∫–æ–π –ø—Ä–æ–º–ø—Ç –±—ã–ª (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
- ‚úÖ `response_payload` - –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç LLM (–¥–ª—è –∞—É–¥–∏—Ç–∞)
- ‚ùå **–ù–ï–¢** `llm_provider_id` FK

**–ü–æ—á–µ–º—É –ù–ï–¢ —Å–≤—è–∑–∏ —Å LLMProvider?**

1. üìö **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å**
   - AIAnalytics - —ç—Ç–æ snapshot —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∞
   - –î–∞–∂–µ –µ—Å–ª–∏ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω/–∏–∑–º–µ–Ω–µ–Ω, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Å—Ç–∞–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º
   - –ü–æ–ª–µ `llm_model` (—Å—Ç—Ä–æ–∫–∞) –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏

2. üîç **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ LLM
   - –ï—Å–ª–∏ –º—ã –ø–æ–º–µ–Ω—è–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏, —Å—Ç–∞—Ä—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º–∏

3. üéØ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**
   - AIAnalytics —Å–≤—è–∑–∞–Ω —Å Source (–æ—Ç–∫—É–¥–∞ –¥–∞–Ω–Ω—ã–µ)
   - Source —Å–≤—è–∑–∞–Ω —Å BotScenario (–∫–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å)
   - BotScenario —Å–≤—è–∑–∞–Ω —Å LLMProvider (–∫–∞–∫–æ–π AI –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
   - AIAnalytics ‚Üí Source ‚Üí BotScenario ‚Üí LLMProvider (—á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É)

## üîÑ –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ Flow

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:

```python
# 1. –°–æ–∑–¥–∞–µ–º LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
deepseek = LLMProvider(
    name="DeepSeek",
    provider_type="deepseek",
    capabilities=["text"]
)

gpt4_vision = LLMProvider(
    name="GPT-4 Vision",
    provider_type="openai",
    capabilities=["text", "image", "video"]
)

# 2. –°–æ–∑–¥–∞–µ–º —Å—Ü–µ–Ω–∞—Ä–∏–π
scenario = BotScenario(
    name="Tech News Analysis",
    analysis_types=["sentiment", "topics"],
    content_types=["posts", "videos"],
    text_llm_provider_id=deepseek.id,      # –¢–µ–∫—Å—Ç ‚Üí DeepSeek
    image_llm_provider_id=gpt4_vision.id,  # –§–æ—Ç–æ ‚Üí GPT-4
    video_llm_provider_id=gpt4_vision.id   # –í–∏–¥–µ–æ ‚Üí GPT-4
)

# 3. –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É
source = Source(
    name="TechCrunch VK",
    platform_id=1,
    bot_scenario_id=scenario.id  # ‚Üê –ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π
)
```

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞:

```python
# 1. –°–æ–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
collector = ContentCollector()
await collector.collect_from_source(source)

# 2. –í–Ω—É—Ç—Ä–∏ collector –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:
analyzer = AIAnalyzer()
await analyzer.analyze_content(content, source)

# 3. AIAnalyzer –¥–µ–ª–∞–µ—Ç:
# - –ó–∞–≥—Ä—É–∂–∞–µ—Ç scenario –∏–∑ source.bot_scenario_id
bot_scenario = await BotScenario.objects.get(id=source.bot_scenario_id)

# - –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç
classified = {
    'text': [post1, post2, ...],
    'images': [img1, img2, ...],
    'videos': [vid1, ...]
}

# - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –±–µ—Ä–µ—Ç –°–í–û–ô LLM –∏–∑ scenario
text_provider = bot_scenario.text_llm_provider    # DeepSeek
image_provider = bot_scenario.image_llm_provider  # GPT-4 Vision
video_provider = bot_scenario.video_llm_provider  # GPT-4 Vision

# - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π —Ç–∏–ø
text_analysis = await analyze_with_llm(classified['text'], text_provider)
image_analysis = await analyze_with_llm(classified['images'], image_provider)
video_analysis = await analyze_with_llm(classified['videos'], video_provider)

# - –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
unified_summary = create_summary(text_analysis, image_analysis, video_analysis)

# 4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
analytics = AIAnalytics(
    source_id=source.id,
    summary_data={
        'text_analysis': text_analysis,
        'image_analysis': image_analysis,
        'video_analysis': video_analysis,
        'unified_summary': unified_summary
    },
    llm_model="deepseek-chat, gpt-4-vision",  # –î–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ (—Å—Ç—Ä–æ–∫–∞)
    # –ù–ï–¢ llm_provider_id! –ù–µ –Ω—É–∂–µ–Ω!
)
```

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å
```python
# –ú–æ–∂–µ–º –ª–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å LLM –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–π
scenario.text_llm_provider_id = new_provider.id
# –í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å —ç—Ç–∏–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π LLM
```

### ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```python
# –û–¥–∏–Ω —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –º–Ω–æ–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
sources = [
    Source(name="TechCrunch VK", bot_scenario_id=scenario.id),
    Source(name="Habr VK", bot_scenario_id=scenario.id),
    Source(name="IT News TG", bot_scenario_id=scenario.id)
]
# –í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é LLM
```

### ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```python
# –î–∞–∂–µ –µ—Å–ª–∏ –º—ã —É–¥–∞–ª–∏–º LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä
await LLMProvider.objects.delete(old_provider.id)

# –°—Ç–∞—Ä—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –æ—Å—Ç–∞—é—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º–∏
old_analytics = await AIAnalytics.objects.filter(
    llm_model="old-model-name"
)
# –í—Å–µ –µ—â–µ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
```

### ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
```python
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
analytics = await AIAnalytics.objects.filter(source_id=source.id)

# –ü–æ–ª—É—á–∏—Ç—å LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É
source = await Source.objects.select_related('bot_scenario').get(id=1)
scenario = source.bot_scenario
text_llm = scenario.text_llm_provider  # –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —Å—Ü–µ–Ω–∞—Ä–∏–π
```

## üö´ –ß—Ç–æ –±—ã–ª–æ –±—ã –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û

### ‚ùå –ï—Å–ª–∏ –±—ã LLMProvider –±—ã–ª –≤ AIAnalytics:

```python
# –ü–õ–û–•–ê–Ø –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Ç–∞–∫ –ù–ï –°–î–ï–õ–ê–ù–û):
class AIAnalytics:
    llm_provider_id: int  # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
    
# –ü—Ä–æ–±–ª–µ–º—ã:
# 1. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö - –∫–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Ö—Ä–∞–Ω–∏—Ç provider_id
# 2. –ù–µ—Ç –≥–∏–±–∫–æ—Å—Ç–∏ - –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å LLM –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ
# 3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
# 4. –ù–∞—Ä—É—à–µ–Ω–∏–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
```

### ‚ùå –ï—Å–ª–∏ –±—ã LLMProvider –±—ã–ª –≤ Source:

```python
# –ü–õ–û–•–ê–Ø –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Ç–∞–∫ –ù–ï –°–î–ï–õ–ê–ù–û):
class Source:
    text_llm_provider_id: int  # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
    
# –ü—Ä–æ–±–ª–µ–º—ã:
# 1. –ù–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è - –∫–∞–∂–¥—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
# 2. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ - –µ—Å–ª–∏ 100 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, 100 —Ä–∞–∑ —É–∫–∞–∑—ã–≤–∞–µ–º LLM
# 3. –°–ª–æ–∂–Ω–æ –º–∞—Å—Å–æ–≤–æ –∏–∑–º–µ–Ω–∏—Ç—å - –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–∞–∂–¥—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫
```

## ‚úÖ –í—ã–≤–æ–¥

**LLMProvider –ø–æ–¥–∫–ª—é—á–µ–Ω –¢–û–õ–¨–ö–û –≤ BotScenario - —ç—Ç–æ –ü–†–ê–í–ò–õ–¨–ù–û!**

**–†–æ–ª–∏ —á–µ—Ç–∫–æ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã:**
- üìã **BotScenario** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ö–ê–ö –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å (–≤–∫–ª—é—á–∞—è –≤—ã–±–æ—Ä LLM)
- üîó **Source** - –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π
- üìä **AIAnalytics** - –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
- ü§ñ **LLMProvider** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AI –º–æ–¥–µ–ª–µ–π

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:**
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—É—é –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –ë–î

**–ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è - –≤—Å—ë —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** üéØ
