# Boolean Field "–î–∞ / –ù–µ—Ç" - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–î–∞—Ç–∞:** 2024-12-10

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ö–∞—Å—Ç–æ–º–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ is_active –≤ BaseAdmin

**–§–∞–π–ª:** `app/admin/base.py`

```python
from wtforms import SelectField

class BaseAdmin(ModelView):
    # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º is_active –∫–∞–∫ SelectField —Å "–î–∞ / –ù–µ—Ç"
    form_overrides = {
        'is_active': SelectField
    }
    
    form_args = {
        'is_active': {
            'choices': [(True, '–î–∞'), (False, '–ù–µ—Ç')],
            'coerce': lambda x: x == 'True' if isinstance(x, str) else bool(x)
        }
    }
    
    column_labels = {
        "is_active": "–ê–∫—Ç–∏–≤–µ–Ω",
        "created_at": "–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è",
        "updated_at": "–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è",
    }
```

**–ß—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- `form_overrides` ‚Üí –∑–∞–º–µ–Ω—è–µ—Ç BooleanField –Ω–∞ SelectField
- `form_args.choices` ‚Üí –∑–∞–¥–∞—ë—Ç –æ–ø—Ü–∏–∏: (True, '–î–∞'), (False, '–ù–µ—Ç')
- `form_args.coerce` ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É –∏–∑ —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—Ç–Ω–æ –≤ boolean
- `column_labels` ‚Üí —Ä—É—Å—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å "–ê–∫—Ç–∏–≤–µ–Ω"

---

### 2. –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ views.py

–£–±—Ä–∞–ª–∏ `"is_active": "–ê–∫—Ç–∏–≤–µ–Ω"` / `"is_active": "–ê–∫—Ç–∏–≤–Ω–∞"` –∏–∑:

‚úÖ **UserAdmin** (—Å—Ç—Ä–æ–∫–∞ 40)
```python
column_labels = dict({
    "id": "ID",
    "username": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
    "email": "Email",
    "role": "–†–æ–ª—å",
    # "is_active": "–ê–∫—Ç–∏–≤–µ–Ω",  ‚Üê —É–¥–∞–ª–µ–Ω–æ (–±–µ—Ä—ë—Ç—Å—è –∏–∑ BaseAdmin)
}, **BaseAdmin.column_labels)
```

‚úÖ **PlatformAdmin** (—Å—Ç—Ä–æ–∫–∞ 146)
```python
column_labels = {
    "id": "ID",
    "name": "–ù–∞–∑–≤–∞–Ω–∏–µ",
    # "is_active": "–ê–∫—Ç–∏–≤–Ω–∞",  ‚Üê —É–¥–∞–ª–µ–Ω–æ
}
```

‚úÖ **SourceAdmin** (—Å—Ç—Ä–æ–∫–∞ 207)
```python
column_labels = dict({
    "platform": "–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞",
    "name": "–ù–∞–∑–≤–∞–Ω–∏–µ",
    # "is_active": "–ê–∫—Ç–∏–≤–µ–Ω",  ‚Üê —É–¥–∞–ª–µ–Ω–æ
}, **BaseAdmin.column_labels)
```

‚úÖ **BotScenarioAdmin** (—Å—Ç—Ä–æ–∫–∞ 432)
```python
column_labels = dict({
    "id": "ID",
    "name": "–ù–∞–∑–≤–∞–Ω–∏–µ",
    # "is_active": "–ê–∫—Ç–∏–≤–µ–Ω",  ‚Üê —É–¥–∞–ª–µ–Ω–æ
}, **BaseAdmin.column_labels)
```

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –†–∞–Ω—å—à–µ (BooleanField):
```html
<div class="form-group">
    <label>–ê–∫—Ç–∏–≤–µ–Ω</label>
    <input type="checkbox" name="is_active" value="1" />
</div>

<!-- –ü—Ä–∏ True: –≥–∞–ª–æ—á–∫–∞ —Å—Ç–æ–∏—Ç -->
<!-- –ü—Ä–∏ False: –≥–∞–ª–æ—á–∫–∞ —Å–Ω—è—Ç–∞ -->
```

### –¢–µ–ø–µ—Ä—å (SelectField):
```html
<div class="form-group">
    <label>–ê–∫—Ç–∏–≤–µ–Ω</label>
    <select name="is_active">
        <option value="True">–î–∞</option>
        <option value="False">–ù–µ—Ç</option>
    </select>
</div>

<!-- –ü—Ä–∏ True: –≤—ã–±—Ä–∞–Ω–æ "–î–∞" -->
<!-- –ü—Ä–∏ False: –≤—ã–±—Ä–∞–Ω–æ "–ù–µ—Ç" -->
```

---

## üîß –§—É–Ω–∫—Ü–∏—è coerce

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Ñ–æ—Ä–º—ã (—Å—Ç—Ä–æ–∫–∞) –≤ boolean –¥–ª—è –ë–î.

```python
coerce = lambda x: x == 'True' if isinstance(x, str) else bool(x)
```

**–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã:**

| –í—Ö–æ–¥ –∏–∑ —Ñ–æ—Ä–º—ã | –¢–∏–ø      | –†–µ–∑—É–ª—å—Ç–∞—Ç | –í –ë–î  |
|---------------|----------|-----------|-------|
| `"True"`      | str      | `True`    | true  |
| `"False"`     | str      | `False`   | false |
| `True`        | bool     | `True`    | true  |
| `False`       | bool     | `False`   | false |
| `1`           | int      | `True`    | true  |
| `0`           | int      | `False`   | false |

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- HTML —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `"True"` –∏–ª–∏ `"False"` –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏
- –ë–î –æ–∂–∏–¥–∞–µ—Ç boolean (`true`/`false`)
- coerce –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É ‚Üí boolean –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

---

## üìã –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ –≤—Å–µ–º –º–æ–¥–µ–ª—è–º

**–°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π —Å –ø–æ–ª–µ–º is_active:**

1. ‚úÖ **User** (app/models/user.py)
   - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
   - UserAdmin ‚Üí –Ω–∞—Å–ª–µ–¥—É–µ—Ç BaseAdmin

2. ‚úÖ **Platform** (app/models/platform.py)
   - –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
   - PlatformAdmin ‚Üí –Ω–∞—Å–ª–µ–¥—É–µ—Ç BaseAdmin

3. ‚úÖ **Source** (app/models/source.py)
   - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫
   - SourceAdmin ‚Üí –Ω–∞—Å–ª–µ–¥—É–µ—Ç BaseAdmin

4. ‚úÖ **BotScenario** (app/models/bot_scenario.py)
   - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ —Å—Ü–µ–Ω–∞—Ä–∏–π
   - BotScenarioAdmin ‚Üí –Ω–∞—Å–ª–µ–¥—É–µ—Ç BaseAdmin

**–í—Å–µ —ç—Ç–∏ –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç "–î–∞ / –ù–µ—Ç" –≤–º–µ—Å—Ç–æ True/False!**

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω–∫—É: `/admin/user/create` (–∏–ª–∏ –ª—é–±—É—é –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å)
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
3. –ù–∞–π—Ç–∏ –ø–æ–ª–µ "–ê–∫—Ç–∏–≤–µ–Ω"
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –≠—Ç–æ –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ (–Ω–µ —á–µ–∫–±–æ–∫—Å)
5. –í—ã–±—Ä–∞—Ç—å "–î–∞" –∏–ª–∏ "–ù–µ—Ç"
6. –ù–∞–∂–∞—Ç—å "Save"
7. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ó–∞–ø–∏—Å—å —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞—Å—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ê–∫—Ç–∏–≤–µ–Ω: [‚ñº –î–∞]  –∏–ª–∏  [‚ñº –ù–µ—Ç]
```

---

### 2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π: `/admin/user/list`
2. –í—ã–±—Ä–∞—Ç—å –∑–∞–ø–∏—Å—å —Å `is_active = True`
3. –ù–∞–∂–∞—Ç—å "Edit"
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –í –ø–æ–ª–µ "–ê–∫—Ç–∏–≤–µ–Ω" –≤—ã–±—Ä–∞–Ω–æ "–î–∞"
5. –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ "–ù–µ—Ç"
6. –ù–∞–∂–∞—Ç—å "Save"
7. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –í —Å–ø–∏—Å–∫–µ –∑–∞–ø–∏—Å–µ–π —Ç–µ–ø–µ—Ä—å is_active = False

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–∏ `is_active = True` ‚Üí –≤—ã–±—Ä–∞–Ω–æ "–î–∞"
- –ü—Ä–∏ `is_active = False` ‚Üí –≤—ã–±—Ä–∞–Ω–æ "–ù–µ—Ç"

---

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—Å–µ—Ö –º–æ–¥–µ–ª—è—Ö

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞:**
- ‚úÖ `/admin/user/create` –∏ `/admin/user/edit/1`
- ‚úÖ `/admin/platform/create` –∏ `/admin/platform/edit/1`
- ‚úÖ `/admin/source/create` –∏ `/admin/source/edit/1`
- ‚úÖ `/admin/botscenario/create` –∏ `/admin/botscenario/edit/1`

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –ü–æ–ª–µ is_active - —ç—Ç–æ select (–Ω–µ checkbox)
2. –û–ø—Ü–∏–∏: "–î–∞" –∏ "–ù–µ—Ç"
3. –ó–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
4. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î

---

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. –Ø—Å–Ω–æ—Å—Ç—å
- "–î–∞ / –ù–µ—Ç" –ø–æ–Ω—è—Ç–Ω–µ–µ —á–µ–º True/False –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–µ –Ω—É–∂–Ω–æ –æ–±—ä—è—Å–Ω—è—Ç—å —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –≥–∞–ª–æ—á–∫–∞

### 2. –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ
- –í—Å–µ –º–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (BaseAdmin)

### 3. –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- SelectField –≤—Å–µ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç checkbox)
- –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å unchecked checkbox = no value

### 4. –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- –õ–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–π —è–∑—ã–∫: `[(True, 'Yes'), (False, 'No')]`

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "–ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫"

**–ü—Ä–∏—á–∏–Ω–∞:** SQLAdmin –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç form_overrides

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç: `from wtforms import SelectField`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ view –Ω–∞—Å–ª–µ–¥—É–µ—Ç BaseAdmin
3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –Ω–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö `form_overrides` –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "–ó–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è"

**–ü—Ä–∏—á–∏–Ω–∞:** coerce –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–∏—Ç—å debug –≤ `BaseAdmin.on_model_change`:
```python
async def on_model_change(self, data: dict, model: Any, is_created: bool, request=None):
    print(f"DEBUG is_active: {data.get('is_active')} (type: {type(data.get('is_active'))})")
    await super().on_model_change(data, model, is_created, request)
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç boolean, –Ω–µ —Å—Ç—Ä–æ–∫–∞.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "–í—ã–±—Ä–∞–Ω–æ –Ω–µ —Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏"

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç choices

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤ –ë–î `is_active` —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ boolean
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ choices –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã: `[(True, '–î–∞'), (False, '–ù–µ—Ç')]`
3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `True`/`False` - —ç—Ç–æ bool, –Ω–µ —Å—Ç—Ä–æ–∫–∏

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### SQLAdmin form_overrides
https://aminalaee.github.io/sqladmin/configurations/

### WTForms SelectField
https://wtforms.readthedocs.io/en/stable/fields/#wtforms.fields.SelectField

### –ü—Ä–∏–º–µ—Ä –∏–∑ Flask-Admin
https://flask-admin.readthedocs.io/en/latest/introduction/#customizing-built-in-forms

---

## ‚úÖ –ò—Ç–æ–≥–æ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `form_overrides` –≤ BaseAdmin
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `form_args` —Å choices –∏ coerce
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `column_labels` –¥–ª—è is_active
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã –∏–∑ 4 admin views

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í–º–µ—Å—Ç–æ —á–µ–∫–±–æ–∫—Å–∞ True/False
- –¢–µ–ø–µ—Ä—å –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ "–î–∞ / –ù–µ—Ç"
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –º–æ–¥–µ–ª—è–º —Å is_active
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ
